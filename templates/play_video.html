<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Player</title>
    {% if video_format == "webm" %}
        <!-- OGV.js for .webm playback -->
        <script src="/static/ogvjs-1.9.0/ogv.js"></script>
    {% else %}
        <!-- Video.js for other video formats -->
        <link href="https://vjs.zencdn.net/7.11.4/video-js.css" rel="stylesheet" />
        <script src="https://vjs.zencdn.net/7.11.4/video.min.js"></script>
    {% endif %}
    <style>
        body {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #191919; /* Set to a dark grey background */
        }
        .video-container {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }
        .seek-slider {
            margin-top: 10px;
            width: 50%;
        }
        .video-js {
            width: 640px;
            height: 360px;
        }
    </style>
</head>
<body>
    {% if video_format == "webm" %}
    <!-- OGV.js player for .webm files -->
    <div class="video-container">
        <div id="videoContainer"></div>
        <input type="range" id="seekSlider" class="seek-slider" min="0" value="0" step="1"/>
    </div>
    <script>
        var player = new OGVPlayer({ debug: true });
        var containerElement = document.getElementById('videoContainer');
        containerElement.appendChild(player);
        player.src = '/videos/{{ video_name }}';
        player.volume = 0.0;
        containerElement.addEventListener('click', function() {
            if (player.paused) {
                player.play();
                player.volume = 1.0;
            } else {
                player.pause();
            }
        });
        player.addEventListener('loadedmetadata', function() {
            document.getElementById('seekSlider').max = player.duration;
        });
        player.addEventListener('timeupdate', function() {
            document.getElementById('seekSlider').value = player.currentTime;
        });
        document.getElementById('seekSlider').addEventListener('input', function() {
            player.currentTime = this.value;
        });
    </script>
    {% else %}
    <!-- Video.js player for other formats -->
    <div class="video-container">
        <video id="my-video" class="video-js vjs-default-skin" controls preload="auto" data-setup='{}'>
            <source src="/videos/{{ video_name }}" type="video/mp4">
            Your browser does not support the video tag.
        </video>
    </div>
    <script>
        var player = videojs('my-video');
    </script>
    {% endif %}
</body>
</html>
